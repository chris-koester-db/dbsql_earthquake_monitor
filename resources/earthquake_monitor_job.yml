# A job running SQL queries on a SQL warehouse
resources:
  jobs:
    dbsql_earthquake_monitor:
      name: dbsql_earthquake_monitor

      trigger:
        periodic:
          interval: 1
          unit: HOURS

      parameters:
        - name: catalog
          default: ${var.catalog}
        - name: schema
          default: ${var.schema}
        - name: api_path
          default: ${var.api_path}

      tasks:
        - task_key: earthquake_monitor
          notebook_task:
            notebook_path: ../src/earthquake_monitor.sql
            warehouse_id: ${var.warehouse_id}
            base_parameters:
              job_id: "{{workspace.id}}"
              job_run_id: "{{job.run_id}}"
